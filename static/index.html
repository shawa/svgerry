<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
              integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
              crossorigin="anonymous">


        <link href="https://fonts.googleapis.com/css?family=Pacifico|Lato" rel="stylesheet">

        <script src="https://code.jquery.com/jquery-3.1.1.min.js"
                integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
                crossorigin="anonymous"></script>

        <style>
         body {
             font-family: Lato;
         }
         #logo {
             font-family: Pacifico;
             font-size: 20pt;
             text-align: center;
         }

        #transhint {
            margin-left: 10em;
        }
         #tagline {
             font-size: 0.8em;
             text-align: center
         }
         #email, #shapetext {
             font-family: Menlo
         }

         #keyHint{
             color: #888;
         }
         #shapetext {
             margin-top: 1em;
             margin-bottom: 1em;
             background-color: #222222;
             color: #eeeeee
         }

         #shapeSVGDrawing {
             border: 1px solid #eeeeee;
         }
        </style>
    </head>
    <body>
            </div>

            <div class="container">
                <h1 id="logo">SVGerry</h1>
                <h2 id="tagline">Andrew Shaw <span id="email">&lt;shawa1@tcd.ie&gt;</span></h2>
                <iframe id="shapeSVGDrawing" width="100%" height="65%">
                </iframe>

            <form>
                <div class="form-group"></div>
                <textarea class="form-control" id="shapeText" rows="4" default="text">
[([FillColour (Hex "f330ff"), StrokeColour Rebeccapurple, StrokeWidth 10], [Translate -3 -2, Rotate 45, Scale 15 12], Square)
,([FillColour Mediumspringgreen, StrokeColour (RGBA 1 1 1 1), StrokeWidth 2], [Translate 0 -1], Circle)
,([FillColour (RGBA 1 1 1 0.4), StrokeColour Cyan, StrokeWidth 30], [Translate -1 1, Scale 12 6], Circle)
,([FillColour Salmon, StrokeColour Steelblue], [Translate -10 -30,  Rotate 2, Scale 2 60], Square)]
 </textarea>
                <button type="button" "onclick="postShapeText()" id="shapeRenderButton" class="btn">render</button>
                <span id="keyHint">ctrl-enter</span>
                <span id="transHint">note: the order of transforms matters! unless you know what you're doing, specify translate, then rotate, then scale!</span>
            </form>
        </div>


    <script type="text/javascript">
      function requestRender(event){
        const shapeText = $('#shapeText').val().replace('\n', ' ');
        url =  `http://localhost:3000/svg?shapeText=${shapeText}`;
        console.log(url);
        $("#shapeSVGDrawing").attr('src', url);
      }
      $('#shapeText').keydown((e) => {
          if ((e.ctrlKey || e.metaKey) && e.keyCode === 13) {
              requestRender();
          }
      });
      $('#shapeRenderButton').on('click', requestRender);
      $('document').ready(requestRender);
    </script>

    </body>

</html>
